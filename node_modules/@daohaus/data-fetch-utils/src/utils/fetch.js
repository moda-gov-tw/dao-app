"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.put = exports.post = exports.get = void 0;
const tslib_1 = require("tslib");
const cross_fetch_1 = require("cross-fetch");
function http(path, config) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const request = new cross_fetch_1.Request(path, config);
        const response = yield (0, cross_fetch_1.default)(request);
        if (!response.ok) {
            throw new Error(response.statusText);
        }
        return response.json().catch(() => ({}));
    });
}
function get(path, config) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const init = Object.assign({ method: 'get' }, config);
        return yield http(path, init);
    });
}
exports.get = get;
function post(path, body, config) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const init = Object.assign({ method: 'post', body: JSON.stringify(body) }, config);
        return yield http(path, init);
    });
}
exports.post = post;
function put(path, body, config) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const init = Object.assign({ method: 'put', body: JSON.stringify(body) }, config);
        return yield http(path, init);
    });
}
exports.put = put;
//# sourceMappingURL=fetch.js.map