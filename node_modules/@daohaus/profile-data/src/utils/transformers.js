"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.transformProfile = void 0;
const utils_1 = require("@daohaus/utils");
const transformProfile = ({ address, ensDomain, }) => {
    var _a, _b;
    return {
        address,
        ens: (0, utils_1.isString)(ensDomain) ? ensDomain : (_a = ensDomain === null || ensDomain === void 0 ? void 0 : ensDomain.domain) === null || _a === void 0 ? void 0 : _a.name,
        avatar: (0, utils_1.isString)(ensDomain)
            ? ensDomain
            : formatImageUrl((_b = ensDomain === null || ensDomain === void 0 ? void 0 : ensDomain.domain) === null || _b === void 0 ? void 0 : _b.avatar),
    };
};
exports.transformProfile = transformProfile;
const formatImageUrl = (imageUri) => {
    if (!imageUri)
        return;
    if (imageUri.toLowerCase().startsWith('http') ||
        imageUri.toLowerCase().startsWith('data')) {
        return imageUri;
    }
    if (imageUri.toLowerCase().startsWith('ipfs')) {
        return `https://daohaus.mypinata.cloud/ipfs/${imageUri.match(/Qm[a-zA-Z0-9/.]+/)}`;
    }
};
//# sourceMappingURL=transformers.js.map