"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.selectorsFromBytecode = exports.selectorsFromABI = void 0;
const ethers_1 = require("ethers");
const utils_js_1 = require("./utils.js");
const disasm_js_1 = require("./disasm.js");
function selectorsFromABI(abi) {
    const r = {};
    for (const el of abi) {
        if (typeof (el) !== "string" && el.type !== "function")
            continue;
        const f = ethers_1.FunctionFragment.from(el).format();
        r[(0, utils_js_1.keccak256)(f).substring(0, 10)] = f;
    }
    return r;
}
exports.selectorsFromABI = selectorsFromABI;
function selectorsFromBytecode(code) {
    const abi = (0, disasm_js_1.abiFromBytecode)(code);
    if (abi.length === 0)
        return [];
    let selectors = [];
    for (const a of abi) {
        if (a.type !== "function")
            continue;
        selectors.push(a.selector);
    }
    return selectors;
}
exports.selectorsFromBytecode = selectorsFromBytecode;
//# sourceMappingURL=selectors.js.map